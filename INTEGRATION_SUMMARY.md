# DeepSeek-OCR é›†æˆå®Œæˆæ€»ç»“

æœ¬æ–‡æ¡£æ€»ç»“äº†DeepSeek-OCRåœ¨WSJFé¡¹ç›®ä¸­çš„é›†æˆæƒ…å†µã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒåŠŸèƒ½é›†æˆ

#### 1.1 OCRæ£€æµ‹å’Œæç¤ºï¼ˆå‰ç«¯ï¼‰
- âœ… åˆ›å»º `src/utils/ocrParser.ts` - OCRæ£€æµ‹å·¥å…·
- âœ… ä¿®æ”¹ `src/utils/fileParser.ts` - é›†æˆè‡ªåŠ¨æ£€æµ‹
- âœ… è‡ªåŠ¨è¯†åˆ«æ‰«æPDFå¹¶æä¾›ç”¨æˆ·å‹å¥½çš„æç¤º

**å·¥ä½œåŸç†**:
- ç”¨æˆ·ä¸Šä¼ PDF â†’ æå–æ–‡æœ¬ â†’ æ£€æµ‹æ–‡æœ¬å¯†åº¦
- å¦‚æœæ˜¯æ‰«æä»¶ â†’ æ˜¾ç¤ºOCRå»ºè®®å’Œå·¥å…·ä½¿ç”¨æŒ‡å—
- å¦‚æœæœ‰æ–‡å­—å±‚ â†’ æ­£å¸¸ä½¿ç”¨

#### 1.2 æ‰¹é‡è½¬æ¢å·¥å…·ï¼ˆæœ¬åœ°ï¼‰
- âœ… åˆ›å»º `scripts/ocr-tools/batch-convert.py` - Pythonæ‰¹é‡è½¬æ¢è„šæœ¬
- âœ… åˆ›å»º `scripts/ocr-tools/batch-convert.bat` - Windowså¿«æ·æ–¹å¼
- âœ… æ”¯æŒé€’å½’æ‰«æç›®å½•
- âœ… æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ï¼ˆPDF, PNG, JPG, etc.ï¼‰
- âœ… è‡ªåŠ¨ä¿æŒç›®å½•ç»“æ„

**ç‰¹æ€§**:
- ğŸ¯ è‡ªåŠ¨æ£€æµ‹æ˜¯å¦éœ€è¦OCR
- ğŸš€ æ‰¹é‡å¤„ç†æ•´ä¸ªç›®å½•
- âš™ï¸ å¯é…ç½®åˆ†è¾¨ç‡å’ŒDPI
- ğŸ“Š è¯¦ç»†çš„è¿›åº¦æ˜¾ç¤º
- â­ï¸ æ™ºèƒ½è·³è¿‡å·²è½¬æ¢æ–‡ä»¶

#### 1.3 APIæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
- âœ… åˆ›å»º `scripts/ocr-tools/api-server.py` - FastAPIæœåŠ¡å™¨
- âœ… æä¾›REST APIæ¥å£
- âœ… æ”¯æŒCORSè·¨åŸŸè¯·æ±‚
- âœ… å®Œæ•´çš„APIæ–‡æ¡£ï¼ˆ/docsï¼‰

**APIç«¯ç‚¹**:
- `POST /api/convert-document` - è½¬æ¢æ–‡æ¡£
- `GET /health` - å¥åº·æ£€æŸ¥

### 2. æ–‡æ¡£å’ŒæŒ‡å—

- âœ… `scripts/ocr-tools/README.md` - æ‰¹é‡å·¥å…·è¯¦ç»†è¯´æ˜
- âœ… `docs/OCR_INTEGRATION.md` - å®Œæ•´é›†æˆæ–‡æ¡£
- âœ… `docs/OCR_QUICK_START.md` - 5åˆ†é’Ÿå¿«é€Ÿå…¥é—¨
- âœ… æœ¬æ–‡æ¡£ - é›†æˆæ€»ç»“

### 3. ä¾èµ–çš„æŠ€èƒ½

- âœ… `~/.claude/skills/deepseek-ocr-to-md/` - DeepSeek-OCRæŠ€èƒ½
  - SKILL.md - å®Œæ•´æŠ€èƒ½æ–‡æ¡£
  - scripts/convert_to_md.py - æ ¸å¿ƒè½¬æ¢è„šæœ¬
  - scripts/install.py - å®‰è£…è„šæœ¬
  - integration_example.py - é›†æˆç¤ºä¾‹

## ğŸ“ æ–‡ä»¶ç»“æ„

```
WSJF/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ fileParser.ts         âœ¨ å·²ä¿®æ”¹ - é›†æˆOCRæ£€æµ‹
â”‚       â””â”€â”€ ocrParser.ts          âœ¨ æ–°å¢ - OCRå·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ ocr-tools/                âœ¨ æ–°å¢ - OCRå·¥å…·é›†
â”‚       â”œâ”€â”€ batch-convert.py      â­ æ‰¹é‡è½¬æ¢è„šæœ¬
â”‚       â”œâ”€â”€ batch-convert.bat     â­ Windowså¿«æ·æ–¹å¼
â”‚       â”œâ”€â”€ api-server.py         ğŸ“¡ APIæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
â”‚       â””â”€â”€ README.md             ğŸ“š è¯¦ç»†è¯´æ˜
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ OCR_INTEGRATION.md        ğŸ“– é›†æˆæ–‡æ¡£
â”‚   â”œâ”€â”€ OCR_QUICK_START.md        ğŸš€ å¿«é€Ÿå…¥é—¨
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ INTEGRATION_SUMMARY.md        ğŸ“‹ æœ¬æ–‡æ¡£
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: æ‰¹é‡å·¥å…·ï¼ˆæ¨èï¼‰

**æœ€ç®€å•çš„æ–¹å¼**:
```
åŒå‡»è¿è¡Œ: scripts/ocr-tools/batch-convert.bat
```

**å‘½ä»¤è¡Œæ–¹å¼**:
```bash
# è½¬æ¢æ•´ä¸ªç›®å½•
python scripts/ocr-tools/batch-convert.py ./PDFæ–‡ä»¶å¤¹

# é«˜è´¨é‡è½¬æ¢
python scripts/ocr-tools/batch-convert.py ./æ‰«ææ–‡æ¡£ --resolution large --dpi 300

# æŸ¥çœ‹å¸®åŠ©
python scripts/ocr-tools/batch-convert.py --help
```

**è¾“å‡ºä½ç½®**: `è¾“å…¥ç›®å½•/markdown_output/`

### æ–¹æ³•2: APIæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰

**å¯åŠ¨æœåŠ¡å™¨**:
```bash
# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
pip install fastapi uvicorn[standard] python-multipart

# å¯åŠ¨æœåŠ¡
python scripts/ocr-tools/api-server.py
```

**å‰ç«¯è°ƒç”¨**:
```typescript
import { callOCRAPI } from '@/utils/ocrParser';

const markdown = await callOCRAPI(file);
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. æ™ºèƒ½æ£€æµ‹

```typescript
// è‡ªåŠ¨æ£€æµ‹PDFæ˜¯å¦éœ€è¦OCR
const detection = detectOCRNeeds(extractedText, pageCount, fileName);

if (detection.needsOCR) {
  // æ˜¾ç¤ºOCRå»ºè®®
  console.log(detection.suggestion);
}
```

**æ£€æµ‹è§„åˆ™**:
- å®Œå…¨æ— æ–‡æœ¬ â†’ éœ€è¦OCR
- å¹³å‡æ¯é¡µ < 50å­—ç¬¦ â†’ éœ€è¦OCR
- å¹³å‡æ¯é¡µ < 100å­—ç¬¦ â†’ å»ºè®®OCR

### 2. ç”¨æˆ·å‹å¥½çš„æç¤º

å½“æ£€æµ‹åˆ°æ‰«æPDFæ—¶ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°è¯¦ç»†çš„æ“ä½œæŒ‡å—ï¼š

```
âš ï¸ OCRå»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ­¤PDFæ–‡ä»¶ "éœ€æ±‚æ–‡æ¡£.pdf" æ²¡æœ‰æ–‡å­—å±‚ï¼Œæ˜¯æ‰«æä»¶...

å»ºè®®æ“ä½œï¼š
1. ä½¿ç”¨æ‰¹é‡è½¬æ¢å·¥å…·ï¼šscripts/ocr-tools/batch-convert.bat
2. æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼špython scripts/ocr-tools/batch-convert.py
3. è¯¦ç»†è¯´æ˜ï¼šscripts/ocr-tools/README.md
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 3. çµæ´»çš„è½¬æ¢é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--resolution` | åˆ†è¾¨ç‡ (tiny/small/base/large) | base |
| `--dpi` | PDFæ¸²æŸ“DPI | 200 |
| `--force-ocr` | å¼ºåˆ¶ä½¿ç”¨OCR | False |
| `--no-skip` | è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶ | False |
| `--output` | è¾“å‡ºç›®å½• | è¾“å…¥ç›®å½•/markdown_output |

## ğŸ“Š æ€§èƒ½å‚è€ƒ

åŸºäº NVIDIA A100 GPUï¼š

| åˆ†è¾¨ç‡ | é€Ÿåº¦ | å•é¡µè€—æ—¶ | GPUå†…å­˜ | é€‚ç”¨åœºæ™¯ |
|--------|------|----------|---------|----------|
| tiny | æœ€å¿« | ~1ç§’ | ~2GB | å¿«é€Ÿé¢„è§ˆ |
| small | å¿« | ~1-2ç§’ | ~3GB | ç®€å•æ–‡æ¡£ |
| **base** | **å¹³è¡¡** | **~2-3ç§’** | **~6GB** | **æ¨è** |
| large | æ…¢ | ~3-5ç§’ | ~10GB | é«˜è´¨é‡æ‰«æ |

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•OCRæ£€æµ‹ï¼ˆå‰ç«¯ï¼‰

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
   ```bash
   cd WSJF
   npm run dev
   ```

2. ä¸Šä¼ æ‰«æPDFæ–‡ä»¶

3. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºOCRå»ºè®®æç¤º

### 2. æµ‹è¯•æ‰¹é‡è½¬æ¢å·¥å…·

**æµ‹è¯•1: Windowsæ‰¹å¤„ç†**
```
1. åŒå‡» scripts/ocr-tools/batch-convert.bat
2. é€‰æ‹©æ¨¡å¼1ï¼ˆå¿«é€Ÿè½¬æ¢ï¼‰
3. ç¡®è®¤è½¬æ¢æˆåŠŸ
```

**æµ‹è¯•2: Pythonè„šæœ¬**
```bash
# åˆ›å»ºæµ‹è¯•ç›®å½•
mkdir test-pdfs
# æ”¾å…¥å‡ ä¸ªPDFæ–‡ä»¶

# è¿è¡Œè½¬æ¢
python scripts/ocr-tools/batch-convert.py ./test-pdfs

# æ£€æŸ¥è¾“å‡º
ls test-pdfs/markdown_output/
```

### 3. æµ‹è¯•APIæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰

```bash
# å¯åŠ¨æœåŠ¡å™¨
python scripts/ocr-tools/api-server.py

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯•
curl -X POST -F "file=@test.pdf" http://localhost:8000/api/convert-document
```

## âœ… éªŒè¯æ£€æŸ¥æ¸…å•

### å‰ç«¯é›†æˆ
- [ ] `src/utils/ocrParser.ts` æ–‡ä»¶å­˜åœ¨
- [ ] `src/utils/fileParser.ts` å·²ä¿®æ”¹
- [ ] ä¸Šä¼ æ‰«æPDFæ—¶æ˜¾ç¤ºOCRæç¤º
- [ ] TypeScriptç¼–è¯‘æ— é”™è¯¯

### æ‰¹é‡å·¥å…·
- [ ] `batch-convert.py` å¯ä»¥è¿è¡Œ
- [ ] `batch-convert.bat` åŒå‡»å¯ç”¨
- [ ] è½¬æ¢æˆåŠŸç”ŸæˆMDæ–‡ä»¶
- [ ] ä¿æŒç›®å½•ç»“æ„
- [ ] è·³è¿‡å·²å­˜åœ¨æ–‡ä»¶

### APIæœåŠ¡å™¨
- [ ] æœåŠ¡å™¨å¯ä»¥å¯åŠ¨
- [ ] `/health` ç«¯ç‚¹æ­£å¸¸
- [ ] `/api/convert-document` å¯ä»¥è½¬æ¢æ–‡ä»¶
- [ ] CORSé…ç½®æ­£ç¡®

### æ–‡æ¡£
- [ ] æ‰€æœ‰æ–‡æ¡£æ–‡ä»¶å­˜åœ¨
- [ ] å¿«é€Ÿå…¥é—¨æ¸…æ™°æ˜“æ‡‚
- [ ] é›†æˆæ–‡æ¡£è¯¦ç»†å®Œæ•´

## ğŸ”® æœªæ¥æ‰©å±•

### å¯èƒ½çš„å¢å¼º

1. **å‰ç«¯ç›´æ¥é›†æˆ**
   - åœ¨å‰ç«¯ç›´æ¥è°ƒç”¨Pythonè„šæœ¬ï¼ˆé€šè¿‡Electronæˆ–Tauriï¼‰
   - æˆ–æä¾›åœ¨çº¿OCRæœåŠ¡

2. **æ‰¹å¤„ç†ä¼˜åŒ–**
   - å¹¶è¡Œå¤„ç†å¤šä¸ªæ–‡ä»¶
   - è¿›åº¦æ¡UI
   - é”™è¯¯é‡è¯•æœºåˆ¶

3. **è´¨é‡æ§åˆ¶**
   - è‡ªåŠ¨è´¨é‡è¯„ä¼°
   - æ™ºèƒ½åˆ†è¾¨ç‡é€‰æ‹©
   - è½¬æ¢ç»“æœå¯¹æ¯”

4. **ä¸é¡¹ç›®æ·±åº¦é›†æˆ**
   - æ–‡ä»¶ä¸Šä¼ æ—¶è‡ªåŠ¨è°ƒç”¨OCRï¼ˆå¦‚æœæœ‰GPUï¼‰
   - OCRç»“æœç¼“å­˜
   - è½¬æ¢å†å²ç®¡ç†

## ğŸ“š ç›¸å…³æ–‡æ¡£

**å¿«é€Ÿå¼€å§‹**:
- ğŸ“– [5åˆ†é’Ÿå¿«é€Ÿå…¥é—¨](docs/OCR_QUICK_START.md)

**è¯¦ç»†æ–‡æ¡£**:
- ğŸ“š [å®Œæ•´é›†æˆæ–‡æ¡£](docs/OCR_INTEGRATION.md)
- ğŸ› ï¸ [æ‰¹é‡å·¥å…·è¯´æ˜](scripts/ocr-tools/README.md)

**æŠ€èƒ½æ–‡æ¡£**:
- ğŸ“– [DeepSeek-OCRæŠ€èƒ½](~/.claude/skills/deepseek-ocr-to-md/SKILL.md)
- ğŸ’» [é›†æˆç¤ºä¾‹ä»£ç ](~/.claude/skills/deepseek-ocr-to-md/integration_example.py)

**å®˜æ–¹èµ„æº**:
- ğŸ”— [DeepSeek-OCR GitHub](https://github.com/deepseek-ai/DeepSeek-OCR)

## ğŸ‰ æ€»ç»“

DeepSeek-OCRå·²æˆåŠŸé›†æˆåˆ°WSJFé¡¹ç›®ä¸­ï¼

**ä¸»è¦æˆæœ**:
- âœ… è‡ªåŠ¨æ£€æµ‹æ‰«æPDF
- âœ… æä¾›æ¸…æ™°çš„ç”¨æˆ·æŒ‡å¼•
- âœ… æ‰¹é‡è½¬æ¢å·¥å…·ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰
- âœ… APIæœåŠ¡å™¨ï¼ˆå¯é€‰éƒ¨ç½²ï¼‰
- âœ… å®Œæ•´çš„æ–‡æ¡£å’Œç¤ºä¾‹

**ç«‹å³ä½¿ç”¨**:
```
åŒå‡»è¿è¡Œ: scripts/ocr-tools/batch-convert.bat
```

**è·å–å¸®åŠ©**:
- æŸ¥çœ‹ `docs/OCR_QUICK_START.md`
- æˆ–æŸ¥é˜… `docs/OCR_INTEGRATION.md`

---

**é›†æˆå®Œæˆæ—¥æœŸ**: 2025-10-25
**ç‰ˆæœ¬**: v1.0.0
