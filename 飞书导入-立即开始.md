# 🚀 飞书导入 - 立即开始（3分钟）

## ✨ 好消息！

已为您实现**手动Token模式**，**立即可用**，无需复杂配置！

---

## 第1步：获取Plugin Token（1分钟）

### 方法A：使用PowerShell命令（最快）⭐ 推荐

1. **按 `Win + X`，选择"Windows PowerShell"**

2. **复制并运行以下命令**：

```powershell
$body = @{
    app_id = "MII_68F1064FA240006C"
    app_secret = "050E0E049ACB87339CB9D11E5641564F"
} | ConvertTo-Json

$response = Invoke-RestMethod -Method Post -Uri "https://open.feishu.cn/open-apis/auth/v3/app_access_token/internal" -Body $body -ContentType "application/json"

Write-Host "您的Token是："
Write-Host $response.tenant_access_token -ForegroundColor Green
```

3. **复制输出的Token**（绿色显示的那一长串）

**预期输出示例**：
```
您的Token是：
t-g1045wfbRCPEGFXICU7TQIBCDTLHQXZKMWZOPJZS
```

### 方法B：在权限管理页面查找

在飞书开放平台 → WSJF-Lite → 权限管理页面，查找"虚拟token"或"测试token"。

---

## 第2步：在WSJF中配置（1分钟）

1. **打开WSJF应用** http://localhost:3000

2. **点击Header右侧的紫色按钮"从飞书导入"**

3. **填写信息**：
   - **授权方式**: 选择 **"手动Token（推荐）"**（绿色的那个）
   - **Plugin ID**: `MII_68F1064FA240006C`
   - **Plugin Secret**: `050E0E049ACB87339CB9D11E5641564F`
   - **Plugin Token**: 粘贴第1步获取的token
   - **勾选**: ✅ "使用飞书项目插件Header"

4. **点击绿色按钮"保存并测试"**

---

## 第3步：导入数据（1分钟）

1. **选择项目**
   - 应该能看到您的飞书项目列表
   - 点击要导入的项目

2. **选择任务**
   - 勾选要导入的任务
   - 或点击"全选"

3. **确认导入**
   - 点击"下一步"
   - 预览数据
   - 点击"确认导入"

**完成！** 🎉

---

## 📸 UI界面预览

### 配置页面应该看到：

```
┌─────────────────────────────────────┐
│ ✨ 快速模式（推荐）                   │
│ 使用手动Token模式，立即可用           │
└─────────────────────────────────────┘

授权方式：
┌──────────────────┐  ┌──────────────────┐
│ 手动Token（推荐） │  │   OAuth授权      │
│ ⚡ 立即可用       │  │ 🔐 需要额外配置  │
└──────────────────┘  └──────────────────┘
    ✅ 选中             未选中

Plugin ID: MII_68F1064FA240006C
Plugin Secret: ****************
Plugin Token: t-g1045wfbRCPEG... [粘贴您获取的token]

✅ 使用飞书项目插件Header（X-Plugin-Token）

┌────────────────────────────┐
│ 保存并测试                  │  ← 点击这个
└────────────────────────────┘
```

---

## ⚠️ 常见问题

### Q: PowerShell命令报错？

**尝试这个简化版本**：

```powershell
curl -X POST "https://open.feishu.cn/open-apis/auth/v3/app_access_token/internal" -H "Content-Type: application/json" -d "{\"app_id\":\"MII_68F1064FA240006C\",\"app_secret\":\"050E0E049ACB87339CB9D11E5641564F\"}"
```

从返回的JSON中找到 `tenant_access_token` 的值。

### Q: 点击"保存并测试"后提示错误？

1. **检查token是否完整复制**（不要有换行或空格）
2. **确认勾选了"使用飞书项目插件Header"**
3. **打开浏览器Console（F12）查看错误信息**

### Q: 看不到项目列表？

可能的原因：
- Token已过期（2小时有效期） → 重新获取
- 您在飞书中真的没有项目 → 去飞书项目中确认
- 权限配置不完整 → 去权限管理添加项目相关权限

---

## 🎯 完整测试流程

```
运行PowerShell命令
   ↓
复制Token
   ↓
打开WSJF应用
   ↓
点击"从飞书导入"
   ↓
选择"手动Token"模式
   ↓
填写ID、Secret、Token
   ↓
勾选"使用飞书项目插件Header"
   ↓
点击"保存并测试"
   ↓
看到项目列表 ✅
   ↓
选择项目
   ↓
选择任务
   ↓
确认导入
   ↓
完成！🎉
```

---

## 📞 需要帮助？

**如果第1步获取Token遇到问题**：
- 截图PowerShell的错误信息
- 或截图飞书开放平台的权限管理页面

**如果第2步配置遇到问题**：
- 按F12打开浏览器Console
- 截图错误信息

**如果第3步看不到项目**：
- 先确认您在飞书中确实有项目
- 截图Console的错误信息

发给我，我立即帮您解决！

---

## 🎁 额外提示

### Token有效期

- Token有效期：2小时
- 过期后：重新运行PowerShell命令获取新token
- 未来改进：可以实现自动刷新

### 为什么用这种方式？

因为您的应用是"飞书项目插件"，它：
- ❌ 不是标准网页应用
- ❌ 不支持标准OAuth
- ✅ 使用飞书项目专用的plugin_token
- ✅ 手动Token模式最简单直接

---

**现在就试试吧！从第1步开始，3分钟完成配置！** 🚀

有问题随时告诉我！
