/**
 * WSJF Sprint Planner - 业务影响度10分制评分标准配置
 *
 * v1.2.0: 定义完整的10分制评分标准
 *
 * 评分维度：
 * - 维度A：业务后果（不做会怎样？）
 * - 维度B：影响范围（影响多少店/人/业务？）
 *
 * 满足任一维度即可打对应分数
 */

import type { ScoringStandard } from '../types';

export const SCORING_STANDARDS: ScoringStandard[] = [
  // ========== 10分 - 致命缺陷 ==========
  {
    score: 10,
    name: '致命缺陷',
    shortDescription: '业务停摆或重大合规风险',
    businessConsequence: [
      '已经导致业务完全无法开展，每天都在造成重大损失',
      '违反法律法规，存在合规风险，可能被罚款或禁止运营',
      '核心流程彻底卡死，大量订单/门店无法正常运转'
    ],
    impactScope: [
      '影响全球50%以上门店的核心业务流程',
      '影响所有类型门店的关键交易环节'
    ],
    typicalCases: [
      '支付系统故障：全球门店无法收款，每小时损失XXX万美元',
      '库存系统崩溃：所有门店无法进货/销售，业务停摆',
      '税务合规缺失：某国门店因税务问题被勒令停业',
      '核心API故障：经销商系统无法下单，全线业务中断'
    ],
    affectedOKRs: ['GMV/营收直接受损', '门店开设数量/存活率直接受损', '重大客诉/法律风险']
  },

  // ========== 9分 - 严重阻塞 ==========
  {
    score: 9,
    name: '严重阻塞',
    shortDescription: '关键流程严重受阻，人工兜底成本极高',
    businessConsequence: [
      '关键业务流程严重受阻，需要大量人工兜底，成本极高且无法持续',
      '核心OKR指标正在明显恶化，每周/每月都能看到负面数据',
      '已经有多个客户/经销商抱怨或威胁终止合作'
    ],
    impactScope: [
      '影响全球30-50%门店或某个大区所有门店',
      '影响某类门店的全部（如所有直营店或所有授权店）'
    ],
    typicalCases: [
      '没有自动对账系统：财务团队每月手工对账，经销商抱怨对账周期长达2周，威胁不再开新店',
      '缺少库存预警：多个门店频繁缺货或积压，库存周转率比行业平均低30%',
      '经销商系统缺失订货功能：经销商只能通过邮件/电话订货，错误率高，处理时间长',
      '门店选址缺少数据支持：开店成功率低，30%的新店在半年内关闭'
    ],
    affectedOKRs: ['GMV/营收增长率受影响', '门店运营效率指标恶化', '经销商/合作伙伴满意度持续下降']
  },

  // ========== 8分 - 战略必需 ==========
  {
    score: 8,
    name: '战略必需',
    shortDescription: '战略方向支撑或竞争力缺失',
    businessConsequence: [
      '战略方向的必要支撑，不做会错失战略机会（如新市场拓展、新业务线）',
      '竞争力缺失：竞品已有，我们没有，客户/经销商在对比中选择竞品',
      '长期发展受限：虽然当下影响不大，但会制约未来12个月的业务规模'
    ],
    impactScope: [
      '影响全球10-30%门店或某个重点国家所有门店',
      '影响某类关键角色的全部（如所有大区经理、所有供应链计划员）'
    ],
    typicalCases: [
      '多语言/多货币支持：进入东南亚市场，但系统不支持泰语/越南盾，导致无法本地化运营',
      '移动端POS系统：竞品都有移动收银，我们没有，导致小型门店更倾向选择竞品',
      '经销商激励体系：缺少系统化的返点/激励计算，经销商积极性不高，开店速度慢于预期',
      '智能补货系统：依赖人工补货，库存周转效率低，制约门店扩张规模'
    ],
    affectedOKRs: ['战略市场的拓展速度', '新业务线的GMV贡献', '关键客户/经销商留存率']
  },

  // ========== 7分 - 显著影响 ==========
  {
    score: 7,
    name: '显著影响',
    shortDescription: '明确影响核心OKR指标，有量化损失',
    businessConsequence: [
      '明确影响核心OKR指标，有清晰的量化损失（如转化率下降X%、处理时长增加Y小时）',
      '持续产生中高成本：每周/每月都需要人工处理，或产生额外成本',
      '客户/经销商反复提出，已经影响合作体验和信任度'
    ],
    impactScope: [
      '影响全球5-10%门店或某个地区所有门店',
      '影响某个合作商旗下所有门店（如某头部经销商的50家店）'
    ],
    typicalCases: [
      '对账功能缺失：经销商对账需要2-3天，对账错误率5%，经销商抱怨影响开店意愿',
      '促销活动系统缺失：促销配置需要3个人手工操作2天，且容易出错，限制了促销频次',
      '门店选址评估工具缺失：选址靠经验，新店成功率70%，低于行业80%的平均水平',
      '售后工单系统缺失：客户投诉无法闭环跟踪，客诉处理时长平均5天，客户满意度受影响'
    ],
    affectedOKRs: ['订单转化率/客单价等交易指标', '门店运营成本/人效指标', '经销商协作效率指标']
  },

  // ========== 6分 - 重要改善 ==========
  {
    score: 6,
    name: '重要改善',
    shortDescription: '持续负面影响，有临时方案勉强支撑',
    businessConsequence: [
      '持续产生中等程度的负面影响，有临时方案但效率低',
      '可能影响过程指标（非核心OKR，但与业务相关）',
      '业务团队明确提出，但当下有workaround勉强支撑'
    ],
    impactScope: [
      '影响全球2-5%门店或某个城市所有门店',
      '影响单个类型门店的部分（如部分直营店、部分授权店）'
    ],
    typicalCases: [
      '批量导入功能缺失：新开50家店需要手工逐个录入基础信息，需要2天时间',
      '库存盘点功能不完善：盘点需要导出Excel手工对比，每月耗时3人天',
      '报表权限管理粗糙：大区经理能看到其他大区数据，需要财务手工筛选后发送',
      '商品上架流程复杂：上架一个新品需要在3个系统分别操作，容易遗漏'
    ],
    affectedOKRs: ['操作效率指标', '数据准确性指标', '用户体验指标']
  },

  // ========== 5分 - 明确需求 ==========
  {
    score: 5,
    name: '明确需求',
    shortDescription: '影响体验/效率，影响可控',
    businessConsequence: [
      '业务明确提出需求，不做会影响体验或效率，但影响可控',
      '有明确的使用场景，频次中等，不是高频操作',
      '有临时方案且成本可接受'
    ],
    impactScope: [
      '影响1-2%门店或某个合作商旗下部分门店（如10-30家）',
      '影响某个职能角色的部分人（如部分店长、部分采购员）'
    ],
    typicalCases: [
      '数据导出功能：某些报表需要导出后再做二次加工，每周需要1-2小时',
      '快速筛选功能：查找某个订单需要翻页多次，但能找到',
      '消息提醒功能：重要事项需要主动登录系统查看，容易遗漏',
      '商品图片批量上传：只能逐个上传，上架100个商品需要半天'
    ],
    affectedOKRs: ['某个流程的操作便利性', '某个角色的工作效率（非核心瓶颈）', '数据可视化程度']
  },

  // ========== 4分 - 体验优化 ==========
  {
    score: 4,
    name: '体验优化',
    shortDescription: '锦上添花，不影响主流程',
    businessConsequence: [
      '锦上添花的改进，不做不影响主流程，做了会更顺手',
      '使用频次较低，或只在特定场景下有用',
      '有其他替代方式，影响很小'
    ],
    impactScope: [
      '影响少数门店（<1%）或个别用户',
      '影响某个小众角色或某个低频场景'
    ],
    typicalCases: [
      '界面布局优化：某个常用按钮位置不顺手，需要多点一次',
      '快捷键支持：某个高频操作希望有快捷键，但鼠标点击也很快',
      '字段排序优化：希望某个字段显示在更靠前的位置',
      '颜色标识优化：希望某种状态用不同颜色高亮显示'
    ],
    affectedOKRs: ['基本不影响业务指标，纯体验优化']
  },

  // ========== 3分 - 便利性改进 ==========
  {
    score: 3,
    name: '便利性改进',
    shortDescription: '少数人诉求，影响范围小',
    businessConsequence: [
      '少数人的便利性诉求，影响范围小，频次低',
      'nice to have，有人提出但不强烈'
    ],
    impactScope: [
      '影响个别门店或个别用户'
    ],
    typicalCases: [
      '某个小众报表：只有1-2个人会用，每月用1次',
      '某个历史功能的小修补：修复一个不影响使用的小瑕疵',
      '某个字段的展示微调：某个字段希望保留2位小数而非四舍五入'
    ],
    affectedOKRs: ['不影响任何业务指标']
  },

  // ========== 2分 - 个性化需求 ==========
  {
    score: 2,
    name: '个性化需求',
    shortDescription: '单个客户特殊诉求，缺少普适性',
    businessConsequence: [
      '单个客户/单个场景的特殊诉求，缺少普适性',
      '只有提出者认为重要，其他人都不需要'
    ],
    impactScope: [
      '影响单个门店或单个用户'
    ],
    typicalCases: [
      '某个经销商的特殊报表格式：只有这一个经销商需要，可以线下导出给他',
      '某个市场的特殊字段：只有某个国家需要，其他国家都不需要',
      '某个用户的个性化习惯：某人希望用自己习惯的方式操作'
    ],
    affectedOKRs: ['不影响任何业务指标']
  },

  // ========== 1分 - 探索性想法 ==========
  {
    score: 1,
    name: '探索性想法',
    shortDescription: '价值不明确，需进一步验证',
    businessConsequence: [
      '探索性的想法，价值不明确，需要进一步验证',
      '"也许可以试试"，没有明确的使用场景'
    ],
    impactScope: [
      '影响范围不明确'
    ],
    typicalCases: [
      '未经验证的创新尝试：某人觉得"如果有XX功能应该会不错"',
      '模糊的想法：某人说"能不能做得更智能一点"',
      '灵光一现的点子：某人突然想到的一个idea，但还没想清楚'
    ],
    affectedOKRs: ['不明确']
  }
];

/**
 * 根据分值获取评分标准
 */
export const getScoringStandard = (score: number): ScoringStandard | undefined => {
  return SCORING_STANDARDS.find(s => s.score === score);
};

/**
 * 获取所有评分标准（按分值降序）
 */
export const getAllScoringStandards = (): ScoringStandard[] => {
  return [...SCORING_STANDARDS].sort((a, b) => b.score - a.score);
};
