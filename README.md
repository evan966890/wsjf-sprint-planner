# WSJF Sprint Planner - 加权优先级排期工具

基于 WSJF (Weighted Shortest Job First) 方法的迭代排期可视化工具。

## 功能特性

- 📊 **智能评分系统**：基于业务价值、时间临界度、DDL 和工作量自动计算热度分
- 🎯 **可视化排期**：拖拽式操作，直观的卡片式需求展示
- 🔍 **多维度筛选**：支持按类型、热度、工作量、业务价值等多维度筛选
- 📈 **资源管理**：实时展示各迭代池的资源使用情况和容量预警
- 📖 **完整说明书**：内置详细的 WSJF-Lite 评分方法说明

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

服务器将自动在浏览器中打开 `http://localhost:3000`

### 3. 构建生产版本

```bash
npm run build
```

### 4. 预览生产构建

```bash
npm run preview
```

## 技术栈

- **React 18** - UI 框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **Tailwind CSS** - 样式框架
- **Lucide React** - 图标库

## 项目结构

```
WSJF/
├── src/
│   ├── main.tsx              # 应用入口
│   ├── index.css             # 全局样式
│   └── wsjf-sprint-planner.tsx  # 主组件
├── index.html                # HTML 模板
├── package.json              # 项目配置
├── vite.config.ts            # Vite 配置
├── tsconfig.json             # TypeScript 配置
└── tailwind.config.js        # Tailwind 配置
```

## 使用说明

### 添加需求
1. 点击左侧"待排期区"的 ➕ 按钮
2. 填写需求信息（名称、负责人、业务价值等）
3. 系统自动计算热度分

### 排期需求
1. 从待排期区拖拽需求卡片
2. 放入右侧的迭代池中
3. 系统自动校验资源容量和技术评估状态

### 筛选需求
使用左侧筛选器：
- 搜索框：按需求名称或负责人搜索
- 类型筛选：功能开发/技术债/Bug修复
- 热度筛选：高/中/低热度
- 工作量筛选：小/中/大规模
- 价值筛选：局部/明显/撬动核心/战略平台

### 查看说明
点击顶部"查看说明书"按钮，了解详细的 WSJF-Lite 评分方法。

## 评分规则

### 当前简化版（v1.2）

- **业务价值 (4档)**：局部 3分 | 明显 6分 | 撬动核心 8分 | 战略平台 10分
- **时间窗口**：随时 0分 | 三月窗口 3分 | 一月硬窗口 5分
- **强制 DDL**：有 5分 | 无 0分
- **工作量奖励（8档细分）**：
  - ≤2天 +8分 | 3-5天 +7分 | 6-14天 +5分 | 15-30天 +3分
  - 31-50天 +2分 | 51-100天 +1分 | 101-150天 0分 | >150天 0分

**权重分** = 归一化到 1-100 的展示分数
**星级** = ★★★★★ (≥85) | ★★★★ (70-84) | ★★★ (55-69) | ★★ (≤54)

**计算公式**：
```
rawScore = 业务价值 + 时间窗口 + 强制DDL + 工作量奖励
displayScore = 10 + 90 × (rawScore - min) / (max - min)
```

### 未来升级计划（v2.0）

将启用完整的10分制评分体系：
- **业务影响度**：1-10分制（10个等级详细标准）
- **技术复杂度**：1-10分制（反向计算，复杂度高降低优先级）
- 更精细的优先级评估算法

## 浏览器支持

- Chrome/Edge (推荐)
- Firefox
- Safari

---

## 📚 开发指南与规范

### 核心文档

- **[开发指南](./DEVELOPMENT.md)** - 完整的开发流程、架构说明、常见任务
- **[项目规范](./.claude/project-rules.md)** - 代码规范、Git规范、术语规范
- **[重构日志](./REFACTOR_LOG.md)** - 重要重构和优化历史

### 快速链接

| 文档 | 说明 | 适合人群 |
|------|------|---------|
| [快速开始](./DEVELOPMENT.md#快速开始) | 环境搭建、启动项目 | 新成员 |
| [项目架构](./DEVELOPMENT.md#项目架构) | 技术栈、目录结构 | 所有开发者 |
| [核心功能](./DEVELOPMENT.md#核心功能说明) | WSJF算法、评分系统 | 产品、开发 |
| [常见任务](./DEVELOPMENT.md#常见开发任务) | 5个典型开发场景 | 开发者 |
| [发布部署](./DEVELOPMENT.md#发布部署) | 发布流程、检查清单 | 发布负责人 |
| [术语规范](./.claude/project-rules.md#术语规范) | 统一术语定义 | 所有团队成员 |
| [Git规范](./.claude/project-rules.md#git-提交规范) | Commit规范、分支策略 | 开发者 |

### 开发规范要点

**必须遵守：**
- ✅ 使用规范术语：权重分、业务影响度、技术复杂度
- ✅ TypeScript 严格模式，禁止使用 `any`
- ✅ 说明书文案从常量获取（不硬编码）
- ✅ 发布前完成说明书检查清单
- ✅ Commit message 遵循规范格式

**详细规范：** 参见 [项目规范文档](./.claude/project-rules.md)

## 版本历史

### v1.0.0 (2025-10-17) - 纯前端完整版 🎉

**重大里程碑：首个生产就绪版本**

#### 核心功能
- ✅ 完整的 WSJF 评分算法实现（含归一化和星级分档）
- ✅ 气泡视图和列表视图双模式切换
- ✅ 流畅的拖拽式排期交互
- ✅ 多维度筛选和灵活排序功能
- ✅ Excel 批量导入导出（支持智能列映射）
- ✅ PDF/截图导出功能
- ✅ 本地数据持久化（LocalStorage）
- ✅ 用户登录和会话管理

#### 代码质量提升
- ✅ 完整的 TypeScript 类型定义（29个接口字段）
- ✅ 详细的中文代码注释（覆盖所有主要组件和算法）
- ✅ 健壮的边界检查和错误处理
  - 数值计算安全性检查（10+ 处）
  - 数组边界和类型验证（5 处）
  - 空值保护和可选链（15+ 处）
  - 除以0防护和百分比边界限制
- ✅ 响应式设计和用户体验优化

#### UI/UX 改进
- ✅ 优化列表视图的横向滚动显示
- ✅ 合并统计信息到同一行节省空间
- ✅ 缩短迭代区域的不可用人日行高
- ✅ 增强进度条可读性（更大字体和更醒目颜色）
- ✅ 支持超容量拖拽并显示警告状态
- ✅ 必填字段标注和表单验证

#### 技术特性
- 单文件架构（src/wsjf-sprint-planner.tsx）
- 纯前端应用，无需后端服务器
- 智能 Excel 映射（可选 Gemini API 支持）
- 响应式布局，支持现代浏览器

#### 已知限制
- 所有数据存储在浏览器本地
- 智能 Excel 映射需要配置 Gemini API
- 不支持多人协作（无后端同步）

#### 构建验证
- TypeScript 编译：✅ 通过（无错误）
- 生产构建：✅ 成功（1804 个模块）
- 构建时间：~3秒
- 包大小：主包 1.1MB（gzip后 338KB）

---

**注意**：v1.0.0 是纯前端完整版本的里程碑。未来如果需要恢复到此版本，使用 `git checkout v1.0.0`

## 许可证

MIT
