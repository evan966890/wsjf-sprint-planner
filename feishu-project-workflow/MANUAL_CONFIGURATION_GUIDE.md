# 手动配置指南 - 飞书项目流程管理

如果API配置遇到问题，您也可以通过飞书项目管理的UI界面手动配置流程管理节点。

## 📋 前置准备

1. 登录飞书项目管理系统
2. 进入您的项目空间
3. 点击右上角设置图标 → 空间配置
4. 选择"工作项管理" → "需求"

## 🔧 配置步骤

### 步骤1：进入流程管理配置

1. 在"需求"工作项类型页面
2. 找到"流程管理"部分
3. 点击"节点信息" → "编辑"

### 步骤2：创建流程节点

按以下顺序创建流程节点：

#### 1️⃣ 需求创建（开始节点）
- **节点名称**：需求创建
- **节点类型**：开始
- **必填字段**：
  - 需求名称（文本）
  - 需求描述（富文本）
  - 创建时间（日期时间，自动）
  - 优先级（单选：高/中/低）

#### 2️⃣ 方案设计
- **节点名称**：方案设计
- **节点类型**：进行中
- **关键字段**：
  - 方案文档（附件）
  - 技术复杂度（单选：高/中/低）
  - 方案开始时间（日期时间）
  - 方案完成时间（日期时间）
  - PRD版本（数字，默认1）
  - PRD返工次数（数字，默认0）

#### 3️⃣ 评审
- **节点名称**：评审
- **节点类型**：评审
- **关键字段**：
  - 评审类型（单选：需求评审/技术评审/设计评审）
  - 评审结果（单选：一次通过/修改后通过/未通过）
  - 评审时间（日期时间）
  - 评审意见（富文本）
  - 评审次数（数字，默认1）

#### 4️⃣ 开发
- **节点名称**：开发
- **节点类型**：进行中
- **关键字段**：
  - 开发开始时间（日期时间）
  - 开发完成时间（日期时间）
  - 并行任务数（数字）
  - 试点开始时间（日期时间）

#### 5️⃣ 测试
- **节点名称**：测试
- **节点类型**：进行中
- **关键字段**：
  - 测试开始时间（日期时间）
  - 测试完成时间（日期时间）
  - 缺陷数量（数字）

#### 6️⃣ 上线
- **节点名称**：上线
- **节点类型**：结束
- **关键字段**：
  - 上线时间（日期时间）
  - 发布类型（单选：灰度发布/全量发布/试点发布）
  - 全面推广时间（日期时间）
  - 迭代次数（数字）

### 步骤3：配置流程转换

设置节点之间的转换规则：

1. **需求创建 → 方案设计**
   - 转换名称：开始设计方案

2. **方案设计 → 评审**
   - 转换名称：提交评审

3. **评审 → 方案设计**
   - 转换名称：评审未通过，返回修改
   - 条件：评审结果 = "未通过"

4. **评审 → 开发**
   - 转换名称：评审通过，开始开发
   - 条件：评审结果 ∈ ["一次通过", "修改后通过"]

5. **开发 → 测试**
   - 转换名称：提交测试

6. **测试 → 上线**
   - 转换名称：测试通过，准备上线

7. **测试 → 开发**
   - 转换名称：测试未通过，返回开发
   - 条件：缺陷数量 > 0

### 步骤4：创建自定义字段

在"字段管理"中创建以下自定义字段：

#### Lead Time 相关字段

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 需求创建时间 | 日期时间 | 需求首次创建的时间 |
| 方案开始时间 | 日期时间 | 开始设计方案的时间 |
| 方案完成时间 | 日期时间 | 方案设计完成的时间 |
| 评审开始时间 | 日期时间 | 第一次评审的时间 |
| 评审通过时间 | 日期时间 | 评审最终通过的时间 |
| 上线时间 | 日期时间 | 功能正式上线的时间 |
| Lead Time (天) | 计算字段 | 公式：DATEDIFF(上线时间, 需求创建时间, "day") |

#### 评审通过率相关字段

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 评审结果 | 单选 | 选项：一次通过/修改后通过/多次修改后通过/未通过 |
| 评审轮次 | 数字 | 评审进行的总轮次 |
| 是否一次通过 | 布尔值 | 评审是否一次通过 |

#### 并行吞吐量相关字段

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 并行任务数 | 数字 | 同时进行的任务数量 |
| 参与人数 | 数字 | 参与该需求的团队成员数 |
| 吞吐量评分 | 数字 | 团队吞吐量评分（1-10） |

#### PRD返工率相关字段

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| PRD版本号 | 文本 | 产品需求文档版本 |
| PRD返工次数 | 数字 | PRD被打回修改的次数 |
| PRD返工原因 | 多行文本 | 每次PRD返工的原因记录 |
| 是否有PRD返工 | 布尔值 | PRD是否经历过返工 |

#### 试点到推广相关字段

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 试点开始时间 | 日期时间 | 功能开始试点的时间 |
| 试点结束时间 | 日期时间 | 试点阶段结束的时间 |
| 全面推广时间 | 日期时间 | 功能全面推广的时间 |
| 迭代次数 | 数字 | 从试点到全面推广的迭代次数 |
| 试点反馈评分 | 数字 | 试点用户的平均反馈评分 |
| 试点到GA天数 | 计算字段 | 公式：DATEDIFF(全面推广时间, 试点开始时间, "day") |

### 步骤5：配置自动化规则

在"自动化"设置中配置以下规则：

1. **自动记录时间戳**
   - 触发器：节点状态变更
   - 动作：更新对应的时间字段

2. **自动计算Lead Time**
   - 触发器：上线时间填写
   - 动作：计算并更新Lead Time字段

3. **自动统计返工**
   - 触发器：评审结果为"未通过"
   - 动作：PRD返工次数+1

## 📊 创建质量指标看板

### 1. 创建视图

在"视图管理"中创建以下视图：

- **Lead Time分析**：按月统计平均Lead Time
- **评审效率看板**：显示评审一次通过率趋势
- **并行任务监控**：实时显示团队并行任务数
- **PRD质量分析**：PRD返工率统计
- **试点效果跟踪**：试点到GA的平均时间

### 2. 配置报表

在"报表"模块中创建：

1. **月度质量指标报表**
   - Lead Time趋势图
   - 评审通过率饼图
   - 并行任务柱状图
   - PRD返工率折线图

2. **团队效能仪表盘**
   - 关键指标卡片
   - 目标达成情况
   - 改进建议

## 💡 最佳实践

1. **定期检查数据质量**
   - 确保时间字段准确填写
   - 及时更新节点状态

2. **设置提醒规则**
   - Lead Time超过目标值时提醒
   - PRD返工率异常时预警

3. **持续优化流程**
   - 根据数据分析调整流程节点
   - 优化字段设置提高数据采集效率

## 🔍 验证配置

配置完成后，创建一个测试需求，走完整个流程，验证：

1. ✅ 节点转换是否正常
2. ✅ 字段是否正确显示和记录
3. ✅ 自动化规则是否触发
4. ✅ 计算字段是否正确计算
5. ✅ 报表数据是否正确展示

## 📞 需要帮助？

如遇到配置问题，可以：
1. 查看[飞书项目帮助中心](https://project.feishu.cn/helpcenter)
2. 联系飞书技术支持
3. 参考本项目的API配置脚本进行自动化配置