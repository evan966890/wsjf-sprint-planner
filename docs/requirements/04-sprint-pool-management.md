# 迭代池管理需求文档

## 需求概述
- **功能名称**: 迭代池创建与资源管理
- **业务价值**: 管理迭代周期、资源预留、容量规划
- **优先级**: 🔴 P0 - 核心功能

## 核心功能

### 1. 创建迭代池
- 点击"新增迭代池"按钮
- 填写信息：
  - 迭代名称（如"迭代1"）
  - 开始日期 / 结束日期
  - 总可用人天数
  - Bug修复预留（百分比）
  - 重构预留（百分比）
  - 其他预留（百分比）
- 保存后显示在右侧迭代区

### 2. 编辑迭代池
- 点击迭代池的"编辑"按钮
- 修改时间范围或资源配置
- 保存后重新计算容量

### 3. 删除迭代池
- 点击"删除"按钮
- 确认后删除
- 池中的需求自动回到待排期区

### 4. 资源容量管理

**计算公式：**
```
总可用人天 = 迭代天数 × 参与人数
预留人天 = 总可用人天 × (Bug预留% + 重构预留% + 其他预留%)
净可用人天 = 总可用人天 - 预留人天
已使用人天 = Σ(需求工作量)
使用率 = 已使用人天 / 净可用人天
```

**容量状态：**
- 🟢 充足：使用率 < 80%
- 🟡 接近饱和：使用率 80-100%
- 🔴 超载：使用率 > 100%

### 5. 界面显示

```
┌──────────────────────────────────┐
│ 迭代1                      [编辑][删除]│
│ 2024-02-01 ~ 2024-02-29 (4周)    │
│ ──────────────────────────────── │
│ 总人天: 100  已用: 75  剩余: 25  │
│ [████████░░] 75%                 │
│ ──────────────────────────────── │
│ Bug预留: 20%  重构: 10%  其他: 5%│
│ ──────────────────────────────── │
│ 已排期需求 (5个):                │
│ [需求卡片1] 15天                 │
│ [需求卡片2] 20天                 │
│ ...                               │
└──────────────────────────────────┘
```

## 验收标准
- [ ] 创建迭代池成功，参数正确
- [ ] 资源容量计算准确
- [ ] 使用率实时更新
- [ ] 超载时显示红色警告
- [ ] 删除后需求正确回到待排期区

**最后更新**: 2025-01-19
