# API Key éƒ¨ç½²å®‰å…¨é—®é¢˜

**åˆ›å»ºæ—¶é—´**ï¼š2025-11-12
**ä¼˜å…ˆçº§**ï¼šä¸­ç­‰
**çŠ¶æ€**ï¼šå¾…è§£å†³

## é—®é¢˜æè¿°

å½“å‰é¡¹ç›®çš„ AI åŠŸèƒ½ï¼ˆOpenAI/DeepSeekï¼‰éœ€è¦ API Key æ‰èƒ½å·¥ä½œã€‚ç”±äºŽæ˜¯çº¯å‰ç«¯é¡¹ç›®ï¼ŒAPI Key é…ç½®å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

### å½“å‰æ–¹æ¡ˆçš„å±€é™æ€§

1. **æœ¬åœ°å¼€å‘**ï¼šä½¿ç”¨ `.env.local` é…ç½®ï¼Œä¸æäº¤åˆ° Git âœ…
2. **ç”Ÿäº§éƒ¨ç½²**ï¼šéœ€è¦åœ¨æž„å»ºæ—¶æ³¨å…¥ API Keyï¼Œä½†ï¼š
   - å¦‚æžœåˆ›å»º `.env.production` æ–‡ä»¶æäº¤åˆ° Git â†’ GitHub Push Protection ä¼šé˜»æ­¢ âŒ
   - å¦‚æžœä¸æäº¤é…ç½®æ–‡ä»¶ â†’ æ¯æ¬¡éƒ¨ç½²éœ€è¦æ‰‹åŠ¨åˆ›å»º âš ï¸

### çŽ°çŠ¶

- **å·²å®Œæˆ**ï¼š2025-11-12 æˆåŠŸéƒ¨ç½²åˆ°è…¾è®¯äº‘
- **æ–¹æ³•**ï¼šæ‰‹åŠ¨åˆ›å»º `.env.production` åŽæœ¬åœ°æž„å»ºå¹¶ä¸Šä¼ 
- **é—®é¢˜**ï¼šæ— æ³•å°†é…ç½®æäº¤åˆ° Gitï¼Œå›¢é˜Ÿåä½œå’Œ CI/CD å—é™

## å®‰å…¨é£Žé™©

**å½“å‰é£Žé™©ç­‰çº§**ï¼šâš ï¸ ä¸­ç­‰

å‰ç«¯ç›´æŽ¥è°ƒç”¨ AI API çš„é£Žé™©ï¼š
1. API Key è™½ç„¶è¢«æ··æ·†ï¼Œä½†**æŠ€æœ¯ä¸Šå¯ä»¥è¢«æå–**
2. æ— æ³•é™åˆ¶å•ä¸ªç”¨æˆ·çš„è°ƒç”¨é¢‘çŽ‡
3. æ— æ³•ç›‘æŽ§ API ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬
4. æ¶æ„ç”¨æˆ·å¯èƒ½æ»¥ç”¨ API Key

## è§£å†³æ–¹æ¡ˆï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### æ–¹æ¡ˆ 1ï¼šä½¿ç”¨è…¾è®¯äº‘å‡½æ•°ä½œä¸º API ä»£ç†ï¼ˆæŽ¨èï¼‰â­â­â­

**æž¶æž„**ï¼š
```
å‰ç«¯ â†’ è…¾è®¯äº‘å‡½æ•° â†’ OpenAI/DeepSeek API
```

**ä¼˜åŠ¿**ï¼š
- ðŸ”’ API Key å®Œå…¨éšè—åœ¨æœåŠ¡ç«¯
- ðŸŽ¯ å¯ä»¥æ·»åŠ é€ŸçŽ‡é™åˆ¶ï¼ˆé˜²æ­¢æ»¥ç”¨ï¼‰
- ðŸ“Š å¯ä»¥ç›‘æŽ§ API ä½¿ç”¨æƒ…å†µ
- ðŸ’° å¯ä»¥æŽ§åˆ¶æˆæœ¬ï¼ˆè®¾ç½®è°ƒç”¨ä¸Šé™ï¼‰
- ðŸš€ æ”¯æŒ CI/CD è‡ªåŠ¨éƒ¨ç½²

**å®žæ–½æ­¥éª¤**ï¼š
1. åœ¨è…¾è®¯äº‘ CloudBase åˆ›å»ºäº‘å‡½æ•°
2. äº‘å‡½æ•°ä¸­é…ç½® API Keyï¼ˆä½¿ç”¨è…¾è®¯äº‘çŽ¯å¢ƒå˜é‡ï¼‰
3. å‰ç«¯è°ƒç”¨äº‘å‡½æ•° API è€Œä¸æ˜¯ç›´æŽ¥è°ƒç”¨ OpenAI/DeepSeek
4. æ·»åŠ è¯·æ±‚ç­¾åéªŒè¯ï¼ˆå¯é€‰ï¼‰

**å·¥ä½œé‡**ï¼š~4 å°æ—¶

**å‚è€ƒæ–‡æ¡£**ï¼š
- [è…¾è®¯äº‘å‡½æ•°å¼€å‘æŒ‡å—](https://cloud.tencent.com/document/product/583)
- [é¡¹ç›®åŽç«¯è§„åˆ’](../../backend-planning/README.md)

---

### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨è…¾è®¯äº‘çŽ¯å¢ƒå˜é‡ï¼ˆæ¬¡ä¼˜ï¼‰â­â­

**è¯´æ˜Ž**ï¼š
åœ¨è…¾è®¯äº‘ CloudBase æŽ§åˆ¶å°é…ç½®çŽ¯å¢ƒå˜é‡ï¼Œæž„å»ºæ—¶æ³¨å…¥ã€‚

**å±€é™æ€§**ï¼š
- API Key ä»ç„¶ä¼šç¼–è¯‘åˆ°å‰ç«¯ä»£ç ï¼ˆåªæ˜¯ä¸æäº¤åˆ° Gitï¼‰
- æ— æ³•é˜²æ­¢ Key è¢«æå–å’Œæ»¥ç”¨
- éœ€è¦åœ¨è…¾è®¯äº‘æŽ§åˆ¶å°æ‰‹åŠ¨é…ç½®

**å®žæ–½æ­¥éª¤**ï¼š
1. ç™»å½•è…¾è®¯äº‘ CloudBase æŽ§åˆ¶å°
2. è¿›å…¥çŽ¯å¢ƒ â†’ è®¾ç½® â†’ çŽ¯å¢ƒå˜é‡
3. æ·»åŠ  `VITE_OPENAI_API_KEY` å’Œ `VITE_DEEPSEEK_API_KEY`
4. ä¿®æ”¹ `cloudbaserc.json` æž„å»ºé…ç½®

**å·¥ä½œé‡**ï¼š~1 å°æ—¶

---

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ GitHub Secrets + CI/CDï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰â­

**è¯´æ˜Ž**ï¼š
åœ¨ GitHub Actions ä¸­é…ç½® Secretsï¼Œè‡ªåŠ¨æž„å»ºå’Œéƒ¨ç½²ã€‚

**ä¼˜åŠ¿**ï¼š
- é…ç½®æ–‡ä»¶å¯ä»¥æäº¤ï¼ˆä¸åŒ…å«çœŸå®ž Keyï¼‰
- æ”¯æŒè‡ªåŠ¨åŒ–éƒ¨ç½²

**å±€é™æ€§**ï¼š
- API Key ä»åœ¨å‰ç«¯ä»£ç ä¸­
- æ— æ³•é˜²æ­¢æ»¥ç”¨

**å®žæ–½æ­¥éª¤**ï¼š
1. åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ  Secrets
2. åˆ›å»º GitHub Actions å·¥ä½œæµ
3. åœ¨æž„å»ºæ­¥éª¤ä¸­æ³¨å…¥çŽ¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²åˆ°è…¾è®¯äº‘

**å·¥ä½œé‡**ï¼š~2 å°æ—¶

---

## å½“å‰ä¸´æ—¶æ–¹æ¡ˆ

**éƒ¨ç½²æµç¨‹**ï¼ˆæ‰‹åŠ¨ï¼‰ï¼š

```bash
# 1. åˆ›å»ºç”Ÿäº§çŽ¯å¢ƒé…ç½®ï¼ˆä¸æäº¤åˆ° Gitï¼‰
cat > .env.production << EOF
VITE_OPENAI_API_KEY=your-openai-key
VITE_DEEPSEEK_API_KEY=your-deepseek-key
EOF

# 2. æž„å»º
npm run build

# 3. éƒ¨ç½²åˆ°è…¾è®¯äº‘
cloudbase hosting deploy dist -e xiaomi-4g92opdf60df693e

# 4. åˆ é™¤æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆé˜²æ­¢è¯¯æäº¤ï¼‰
rm .env.production
```

**é—®é¢˜**ï¼š
- éœ€è¦æ¯æ¬¡æ‰‹åŠ¨æ“ä½œ
- å›¢é˜Ÿæˆå‘˜éœ€è¦çŸ¥é“ API Key
- æ— æ³•è‡ªåŠ¨åŒ–éƒ¨ç½²

---

## æŽ¨èè¡ŒåŠ¨è®¡åˆ’

### çŸ­æœŸï¼ˆæœ¬å‘¨å†…ï¼‰
- âœ… è®°å½•å½“å‰éƒ¨ç½²æµç¨‹ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- âœ… æ›´æ–° DEPLOY_TENCENT.md è¯´æ˜Žæ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤
- â³ åˆ›å»ºéƒ¨ç½²è„šæœ¬ç®€åŒ–æµç¨‹

### ä¸­æœŸï¼ˆ2å‘¨å†…ï¼‰
- â³ å®žæ–½æ–¹æ¡ˆ 1ï¼šåˆ›å»ºäº‘å‡½æ•° API ä»£ç†
- â³ é…ç½®è…¾è®¯äº‘çŽ¯å¢ƒå˜é‡
- â³ æµ‹è¯•å’ŒéªŒè¯

### é•¿æœŸ
- â³ å®Œå–„ç›‘æŽ§å’Œæ—¥å¿—
- â³ æ·»åŠ é€ŸçŽ‡é™åˆ¶
- â³ å®žæ–½æˆæœ¬é¢„è­¦

---

## ç›¸å…³æ–‡æ¡£

- [DEPLOY_TENCENT.md](../../DEPLOY_TENCENT.md) - è…¾è®¯äº‘éƒ¨ç½²æŒ‡å—
- [backend-planning/README.md](../../backend-planning/README.md) - åŽç«¯æž¶æž„è§„åˆ’
- [security-standards.md](../standards/security-standards.md) - å®‰å…¨è§„èŒƒ

---

## æ›´æ–°è®°å½•

- 2025-11-12ï¼šåˆ›å»ºæ–‡æ¡£ï¼Œè®°å½•å½“å‰é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
