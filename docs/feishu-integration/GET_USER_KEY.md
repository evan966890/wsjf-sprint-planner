# 如何获取飞书User Key

## 🎯 什么是User Key？

User Key是你在飞书项目管理平台的**用户唯一标识**，类似：`7541721806923694188`

它代表你的个人身份，WSJF使用它来：
- ✅ 从飞书获取你有权限的项目和需求
- ✅ 记录是谁进行了导入操作

---

## ⚡ 获取步骤（2分钟）

### 方法1：通过浏览器开发者工具（推荐）

#### 步骤1：打开飞书项目管理平台

访问：**https://project.f.mioffice.cn**

确保已登录你的账号。

#### 步骤2：打开开发者工具

按键盘 **F12** 键（或右键 → 检查）

#### 步骤3：切换到Network标签

点击开发者工具顶部的 **Network** 标签

#### 步骤4：筛选XHR请求

点击Network面板顶部的 **XHR** 按钮（筛选AJAX请求）

#### 步骤5：触发任意操作

在飞书项目管理平台进行任意操作，例如：
- 点击任意项目
- 刷新页面
- 点击任意菜单

#### 步骤6：查看请求

在Network列表中，点击**任意一个**请求（建议选择包含`/open_api/`的请求）

#### 步骤7：找到User Key

在请求详情中：

1. **切换到 Headers 标签**
2. **向下滚动**找到 "Request Headers" 部分
3. **查找** `X-User-Key` 或 `x-user-key`
4. **复制它的值**（类似：7541721806923694188）

---

### 📸 示例截图

在Network面板中，你应该看到类似这样：

```
Request Headers:
  Host: project.f.mioffice.cn
  Content-Type: application/json
  X-Plugin-Token: p-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
  X-User-Key: 7541721806923694188  ← 这就是你的User Key！
```

---

### 方法2：通过飞书个人资料（可能）

有些飞书版本支持在个人资料中查看User Key：

1. **点击右上角头像**
2. **查看个人资料**
3. **查找用户ID或User Key字段**

注意：不是所有版本都支持这个方法。

---

### 方法3：双击头像（根据官方文档）

根据飞书官方文档提到：

> user_key 可双击用户头像获取

尝试：
1. 在飞书项目管理平台
2. **双击任意用户头像**
3. 查看是否显示User Key

---

## ✅ 获取成功的标志

User Key应该是：
- ✅ 一串纯数字
- ✅ 长度约19位
- ✅ 类似：`7541721806923694188`

如果看到的是：
- ❌ 邮箱（如：xxx@xiaomi.com）
- ❌ 用户名（如：zhangsan）

说明找错字段了，继续找 `X-User-Key`。

---

## 🔍 找不到怎么办？

### 如果在Network中找不到X-User-Key

**可能原因**：
- 没有触发API请求
- 请求太多，没注意看

**解决方案**：
1. **清空Network日志**（点击🚫图标）
2. **勾选Preserve log**（保留日志）
3. **刷新页面**
4. **在过滤框输入**：`open_api`（只显示相关请求）
5. **点击第一个请求**
6. **查看Headers**

---

### 如果还是找不到

**临时方案**：使用管理员的User Key

- 让管理员（如：你）提供User Key
- 所有团队成员使用同一个User Key
- 虽然不是最佳实践，但**完全可以工作**

---

## 🎯 在WSJF中使用

获取到User Key后：

1. **打开WSJF应用**
   - 如果已部署：访问部署的URL
   - 如果本地运行：http://localhost:3000

2. **点击**"从飞书导入"

3. **填写User Key**：
   ```
   User Key: 你获取到的User Key
   ```

4. **保存配置**

5. **开始导入飞书需求！**

---

## 📋 团队成员快速开始清单

```
□ 1. 打开 https://project.f.mioffice.cn
□ 2. 按F12打开开发者工具
□ 3. 切换到Network标签
□ 4. 点击XHR筛选
□ 5. 刷新页面或点击任意项目
□ 6. 点击任意API请求
□ 7. 在Headers中找到X-User-Key
□ 8. 复制User Key的值
□ 9. 在WSJF中配置
□ 10. 完成！
```

---

## 💡 提示

### 如果团队有多人

**建议做法**：
1. 你先帮1-2个同事获取User Key
2. 总结经验，拍照记录步骤
3. 分享给其他团队成员
4. 或者干脆大家用统一的User Key

### User Key会变吗？

**通常不会**。User Key是账号的唯一标识，除非：
- 账号被删除重建
- 公司更换飞书租户

所以获取一次后，可以长期使用。

---

**预计耗时**：2-5分钟
**难度**：⭐⭐☆☆☆

按照步骤操作，很容易就能获取到！
