# 飞书应用安装到企业 - 详细指南

## 🎯 问题
配置了权限、发布了版本，但API仍然无法获取数据，提示权限不足或返回空列表。

## ✅ 解决方案：安装应用到企业

### 方法一：通过"可用性"设置（推荐）

1. **进入飞书开放平台**
   - 打开 https://open.feishu.cn
   - 进入"开发者后台"
   - 点击您的应用"WSJF-Lite"

2. **找到"可用性"菜单**
   - 在左侧菜单栏找到"**应用发布**"或"**可用性**"
   - 点击进入

3. **设置可用范围**
   - 找到"应用可用范围"或"发布范围"
   - 点击"添加可见范围"或"设置使用范围"
   - 选择以下之一：
     - ✅ **全员可见**（推荐，最简单）
     - ✅ **指定部门**（选择您的部门）
     - ✅ **指定用户**（选择您自己）

4. **保存并确认**
   - 点击"保存"或"确认"
   - 可能会提示"应用将安装到企业"，点击确认

### 方法二：通过"版本管理"

1. **进入版本管理**
   - 左侧菜单 → "版本管理与发布"

2. **查看当前版本状态**
   - 如果看到"已发布"但没有"已安装"标识
   - 点击版本右侧的"..."菜单
   - 选择"设置可用范围"或"应用到企业"

3. **选择使用范围**
   - 勾选"全员可见"或选择特定部门/用户
   - 点击"确定"

### 方法三：通过飞书管理后台（需要管理员）

如果您是企业管理员：

1. **打开飞书管理后台**
   - 登录飞书 Web版
   - 点击左下角"管理后台"

2. **进入应用管理**
   - 左侧菜单 → "工作台"
   - 点击"应用管理"

3. **找到并启用应用**
   - 在"企业自建应用"中找到"WSJF-Lite"
   - 点击"启用"或"添加到工作台"
   - 设置可见范围

### 方法四：通过应用链接直接安装（最快）

1. **获取应用安装链接**
   - 在飞书开放平台，您的应用详情页
   - 找到"应用分享"或"安装链接"
   - 复制链接

2. **打开链接安装**
   - 在浏览器打开该链接
   - 会提示安装应用到企业
   - 点击"确认安装"

---

## 🔍 如何验证应用已安装？

### 检查方法1：在飞书开放平台查看

1. 进入您的应用详情页
2. 查看顶部状态：
   - ✅ 应显示"已发布"
   - ✅ 应显示"已安装"或"已启用"
3. 查看"应用可用范围"：
   - 应该显示已设置的范围（如"全员"）

### 检查方法2：在飞书客户端查看

1. 打开飞书客户端或Web版
2. 点击左侧"工作台"
3. 查看是否能找到"WSJF-Lite"应用图标
4. 如果能找到，说明已成功安装

### 检查方法3：测试API调用

在WSJF应用中测试：
1. 点击"从飞书导入"
2. 配置Plugin ID和Secret
3. 点击"保存并连接"
4. 如果显示"连接成功"，说明认证通过
5. 点击"刷新列表"
6. **如果能看到项目列表，说明应用已正确安装并授权！**

---

## ⚠️ 常见问题

### Q: 我是普通员工，没有管理员权限怎么办？

**A**: 企业自建应用通常需要管理员审批或设置。有两种方式：

**方式1：联系IT管理员**
- 让管理员在飞书管理后台安装您的应用
- 或者让管理员给您的账号管理员权限

**方式2：创建测试组织**
- 在飞书开放平台创建一个测试组织
- 在测试组织中您自动是管理员
- 可以自由安装和测试应用

### Q: 设置了"全员可见"但还是无法访问？

**A**: 可能需要：
1. 等待几分钟让权限生效
2. 重新登录飞书
3. 在WSJF应用中重新测试连接
4. 检查浏览器Console是否有新的错误信息

### Q: 提示"应用未发布"？

**A**:
1. 回到"版本管理与发布"
2. 确认有一个版本状态为"已发布"
3. 如果没有，创建版本并点击"申请发布"

---

## 📋 完整操作检查清单

请按顺序确认：

- [x] 已在飞书开放平台创建应用
- [x] 已添加项目和工作项相关权限
- [x] 已创建应用版本
- [x] 已发布应用版本（状态：已发布）
- [ ] **已设置应用可用范围**（全员/部门/个人）← 您在这一步
- [ ] 已在飞书工作台中看到应用图标
- [ ] 在WSJF中测试连接成功
- [ ] 能够获取到项目列表

---

## 🎯 最简单的验证方法

**30秒快速验证**：

1. 打开飞书（客户端或网页版）
2. 点击左侧"工作台"
3. **搜索"WSJF"或"WSJF-Lite"**
4. 如果能找到您的应用图标 → ✅ 已安装
5. 如果找不到 → ❌ 未安装，需要按上面的方法安装

---

## 💡 提示

如果您完成了上述所有步骤，但在WSJF应用的第2步（选择项目）仍然看到"暂无项目"：

**请确认**：
1. 您在飞书项目管理中真的有项目（去飞书中确认）
2. 您的账号有这些项目的访问权限
3. 打开浏览器开发者工具（F12），查看Console中的具体错误信息

把Console中的错误信息截图发给我，我可以帮您精确诊断！
