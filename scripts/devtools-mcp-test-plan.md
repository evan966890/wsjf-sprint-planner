# Chrome DevTools MCP 测试计划

## 配置步骤

### 1. 安装DevTools MCP

在Claude Code或Cursor的MCP配置中添加：

```json
{
  "mcpServers": {
    "chrome-devtools": {
      "command": "npx",
      "args": ["-y", "chrome-devtools-mcp@latest"]
    }
  }
}
```

### 2. 重启AI客户端

确保DevTools MCP服务成功加载。

## 测试用例清单

### 测试套件1: 页面基础功能

**测试目标**: 验证页面加载、渲染和基本交互

**AI提示词**:
```
请使用Chrome DevTools MCP测试 http://localhost:3000 的WSJF Sprint Planner应用：

1. 打开页面并等待完全加载
2. 检查页面标题是否包含"WSJF"
3. 检查控制台是否有错误
4. 截图保存为 test-results/devtools-01-page-load.png
5. 验证以下核心元素是否存在：
   - "WSJF Sprint Planner"标题
   - "待排期"区域
   - "迭代池"区域
   - "新建需求"按钮
   - "新建迭代池"按钮
   - "导出 JSON"按钮
   - "导入"按钮
   - "WSJF-Lite 评分说明书"按钮

请详细记录每一步的结果。
```

### 测试套件2: 需求卡片功能

**测试目标**: 验证需求卡片的显示和交互

**AI提示词**:
```
继续测试WSJF Sprint Planner的需求卡片功能：

1. 在页面上找到所有需求卡片元素
2. 验证至少有一个需求卡片存在
3. 检查第一个需求卡片是否包含：
   - 标题文本
   - 业务影响度信息
   - 权重分（如果是已评估的需求）
   - 星级显示（如果是已评估的需求）
4. 验证卡片是否可拖拽（draggable属性为true）
5. 检查卡片是否有渐变背景色
6. 截图保存为 test-results/devtools-02-requirement-cards.png

请详细记录每一步的结果。
```

### 测试套件3: 编辑需求弹窗

**测试目标**: 验证需求编辑功能

**AI提示词**:
```
测试需求编辑弹窗功能：

1. 点击"新建需求"按钮
2. 等待弹窗打开（应该出现"新建需求"或"编辑需求"标题）
3. 截图保存为 test-results/devtools-03-modal-opened.png
4. 验证弹窗中的所有表单字段：
   - 需求标题输入框
   - 需求描述文本域
   - 业务影响度下拉框
   - 时间窗口单选按钮
   - 技术复杂度下拉框
   - 预估工作量输入
   - 产品进展选择
   - 技术进展选择
5. 在标题框中输入"测试需求标题"
6. 在描述框中输入"这是一个测试需求"
7. 验证"保存"按钮的type属性是"button"（非常重要！）
8. 验证"取消"按钮的type属性是"button"
9. 点击"取消"按钮关闭弹窗
10. 验证弹窗已关闭

请详细记录每一步的结果和任何控制台消息。
```

### 测试套件4: 筛选和排序

**测试目标**: 验证需求筛选功能

**AI提示词**:
```
测试待排期区的筛选功能：

1. 在待排期区找到筛选控件（select元素）
2. 统计当前显示的需求卡片数量
3. 尝试切换不同的筛选选项：
   - 业务线筛选
   - 产品进展筛选
   - 技术进展筛选
4. 验证筛选后卡片数量发生变化
5. 验证可排期和不可排期需求的分组
6. 检查需求是否按权重分降序排列
7. 截图保存为 test-results/devtools-04-filter-sort.png

请详细记录每一步的结果。
```

### 测试套件5: 迭代池管理

**测试目标**: 验证迭代池创建和管理

**AI提示词**:
```
测试迭代池功能：

1. 点击"新建迭代池"按钮
2. 等待弹窗打开
3. 在表单中填写：
   - 迭代名称："测试迭代Sprint-1"
   - 总人天：20
   - 已占用：5
4. 点击保存
5. 验证新迭代池出现在页面上
6. 检查迭代池显示的容量信息
7. 截图保存为 test-results/devtools-05-sprint-pool.png

请详细记录每一步的结果。
```

### 测试套件6: 拖拽功能

**测试目标**: 验证拖拽交互（注意：DevTools MCP可能对拖拽操作有限制）

**AI提示词**:
```
测试拖拽功能（尽可能验证）：

1. 找到一个可拖拽的需求卡片（draggable="true"）
2. 找到一个迭代池作为放置目标
3. 尝试模拟拖拽操作（如果可能的话）：
   - 触发dragstart事件
   - 移动到迭代池上方
   - 触发drop事件
4. 如果无法完成实际拖拽，至少验证：
   - 卡片有draggable属性
   - 迭代池有相应的drop zone
5. 截图保存为 test-results/devtools-06-drag-drop.png

请详细记录测试过程和任何限制。
```

### 测试套件7: 导入导出

**测试目标**: 验证数据导入导出功能

**AI提示词**:
```
测试导入导出功能：

1. 点击"导出 JSON"按钮
2. 验证是否触发下载（检查网络请求或下载事件）
3. 点击"导入"按钮
4. 验证文件选择对话框相关的DOM更新
5. 截图保存为 test-results/devtools-07-import-export.png

注意：实际文件操作可能需要特殊处理。

请详细记录每一步的结果。
```

### 测试套件8: WSJF说明书

**测试目标**: 验证说明书弹窗

**AI提示词**:
```
测试WSJF说明书功能：

1. 点击"WSJF-Lite 评分说明书"按钮
2. 等待说明书弹窗打开
3. 验证弹窗标题为"WSJF-Lite 评分说明书"
4. 检查说明书内容是否完整显示
5. 滚动查看不同section
6. 截图保存为 test-results/devtools-08-handbook.png
7. 点击关闭按钮
8. 验证弹窗已关闭

请详细记录每一步的结果。
```

### 测试套件9: 性能评估

**测试目标**: 使用DevTools的性能分析功能

**AI提示词**:
```
使用Chrome DevTools MCP的性能分析功能评估应用：

1. 启动性能追踪（performance_start_trace）
2. 刷新页面
3. 执行以下操作：
   - 打开新建需求弹窗
   - 关闭弹窗
   - 点击一个需求卡片编辑
   - 关闭编辑弹窗
4. 停止追踪（performance_stop_trace）
5. 分析性能数据（performance_analyze_insight）
6. 生成性能报告，包括：
   - LCP (Largest Contentful Paint)
   - FCP (First Contentful Paint)
   - CLS (Cumulative Layout Shift)
   - 主要性能瓶颈
   - 优化建议

请提供详细的性能分析报告。
```

### 测试套件10: 响应式设计

**测试目标**: 验证不同屏幕尺寸下的表现

**AI提示词**:
```
测试响应式设计：

1. 当前桌面尺寸（1920x1080）截图
   - 保存为 test-results/devtools-10-desktop.png

2. 调整为移动设备尺寸（resize_page: 375x667）
   - 验证页面布局调整
   - 检查是否有横向滚动条
   - 截图保存为 test-results/devtools-10-mobile.png

3. 调整为平板尺寸（resize_page: 768x1024）
   - 验证页面布局调整
   - 截图保存为 test-results/devtools-10-tablet.png

4. 恢复桌面尺寸

请比较不同尺寸下的显示差异。
```

## 测试执行流程

1. **准备环境**
   - 确保开发服务器运行在 http://localhost:3000
   - 确保DevTools MCP已配置并加载

2. **执行测试**
   - 按顺序向Claude Code/Cursor发送上述测试用例的AI提示词
   - 等待每个测试完成并记录结果
   - 收集所有截图和报告

3. **收集结果**
   - 所有截图保存在 test-results/ 目录
   - 创建测试执行报告
   - 记录任何失败或异常

4. **对比Playwright结果**
   - 对比功能覆盖
   - 对比执行时间
   - 对比发现的问题
   - 分析两种工具的优缺点

## 预期结果

DevTools MCP测试应该能够：
- ✅ 完成基本的页面交互测试
- ✅ 验证DOM结构和元素存在性
- ✅ 检查控制台错误
- ✅ 进行性能分析（Playwright难以做到）
- ✅ 截图记录
- ⚠️ 拖拽操作可能有限制
- ⚠️ 文件上传/下载可能需要特殊处理

## 优势对比

### Playwright优势
- 更完整的自动化API
- 更好的拖拽支持
- 可以编写可重复执行的脚本
- 更快的执行速度

### DevTools MCP优势
- AI驱动，更灵活
- 直接访问浏览器底层API
- 优秀的性能分析能力
- 更接近真实用户行为
- 可以进行更深层次的调试

## 注意事项

1. DevTools MCP测试是通过AI交互式进行的，每次执行结果可能略有不同
2. 某些复杂交互（如拖拽）可能需要多次尝试
3. 性能分析是DevTools MCP的独特优势，应充分利用
4. 记得保存所有测试截图和报告以便后续对比
